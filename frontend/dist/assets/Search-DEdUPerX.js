import{a as x,m as E,r as n,b as I,j as e,n as P}from"./index-DiFjIO8C.js";import{S as R,a as q}from"./SongCard-CzYtKY55.js";import{A as O}from"./AlbumCard-C0WgdaMP.js";const K=()=>{const u=x(s=>s.music.songs),j=x(s=>s.music.albums),v=x(s=>s.music.artists),f=E(),d=new URLSearchParams(f.search).get("value"),[p,N]=n.useState([]),b=I(),[r,y]=n.useState(0),[o,h]=n.useState([]),[i,m]=n.useState("all"),[C,g]=n.useState(!1);n.useEffect(()=>{(async()=>{try{g(!0);const t=await P();N(t.data.message)}catch(t){console.error("Lỗi khi tải categories:",t)}finally{g(!1)}})()},[]);const w=({artist:s})=>e.jsxs("div",{onClick:()=>b(`/artist/${s.id}`),className:"cursor-pointer w-full h-fit hover:bg-[var(--light-gray2)] p-3 rounded-sm",children:[e.jsx("img",{loading:"lazy",src:s.avatar,alt:"Album Cover",className:"w-full h-auto object-cover aspect-square rounded-full"}),e.jsx("div",{className:"text-base text-white mt-3 mb-1",children:s.name}),e.jsx("div",{className:"text-gray-500 text-sm",children:"Nghệ sĩ"})]}),k=()=>{const s=u.filter(t=>{const a=t.name.toLowerCase().includes(d.toLowerCase()),l=o.length===0||t.categories_data.some(c=>o.includes(c.id));return a&&l});return e.jsx(e.Fragment,{children:s.length!=0&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:"Bài hát"}),e.jsx(R,{}),e.jsx("div",{className:"grid grid-cols-1",children:s.map((t,a)=>e.jsx(q,{song:t,index:a},a))})]})})},S=()=>{const s=v.filter(t=>t.name.toLowerCase().includes(d.toLowerCase()));return e.jsx(e.Fragment,{children:s.length!=0&&e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:"Nghệ sĩ"}),e.jsx("div",{className:"grid grid-cols-6",children:s.map((t,a)=>e.jsx(w,{artist:t},a))})]})})},L=()=>{const s=j.filter(t=>t.name.toLowerCase().includes(d.toLowerCase()));return e.jsx(e.Fragment,{children:s.length!=0&&e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:"Album"}),e.jsx("div",{className:"grid grid-cols-6 gap-4",children:s.map((t,a)=>e.jsx(O,{album:t},a))})]})})},A=({activeIndex:s})=>{const t=[{key:0,value:"Tất cả"},{key:1,value:"Bài hát"},{key:2,value:"Nghệ sĩ"},{key:3,value:"Album"}];return e.jsx("div",{className:" flex items-center mb-5 text-sm gap-2 px-2",children:t.map(a=>e.jsx("button",{className:`cursor-pointer px-3 py-1 rounded-full transition-colors duration-300 ${s===a.key?"bg-[var(--main-green)] text-black":"bg-[var(--light-gray2)] !text-gray-500 hover:bg-[var(--light-gray1)]"}`,onClick:()=>y(a.key),children:a.value},a.key))})},F=()=>{const s=a=>{const l=a.target.value;l=="all"&&h([]),m(l)},t=a=>{const l=o.includes(a);h(l?c=>c.filter(B=>B!==a):c=>[...c,a])};return e.jsxs("div",{className:"w-fit px-5 text-[var(--light-gray3)] text-sm  ",children:[e.jsx("div",{className:" py-1 mb-5 text-white",children:"Lọc bài hát theo thể loại"}),e.jsxs("form",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"radio",name:"radio",value:"all",checked:i==="all",onChange:s}),"Tất cả"]}),e.jsx("hr",{}),e.jsxs("label",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"radio",name:"radio",value:"other",checked:i==="other",onChange:s}),"Khác"]})]}),i==="other"&&e.jsx("div",{className:"flex flex-col gap-1 my-2 h-[70%] overflow-y-auto custom-scroll",children:p.map((a,l)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"checkbox",checked:o.includes(a.id),onChange:c=>{i!=="other"&&m("other"),t(a.id)}}),e.jsx("span",{children:a.name})]},l))})]})};return e.jsx(e.Fragment,{children:C?e.jsx("div",{className:"loader-container min-h-[50vh]",children:e.jsx("span",{className:"loader",children:" "})}):e.jsx("div",{className:"bg-gradient-to-tl from-stone-900 to-neutral-700 py-10 px-5 h-screen",children:e.jsxs("div",{className:"flex gap-2 h-full",children:[e.jsx(F,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx(A,{activeIndex:r}),e.jsxs("div",{className:"h-[90%] overflow-y-auto p-2 flex flex-col gap-10 custom-scroll",children:[(r==0||r==1)&&e.jsx(k,{}),(r==0||r==2)&&e.jsx(S,{}),(r==0||r==3)&&e.jsx(L,{})]})]})]})})})};export{K as default};
