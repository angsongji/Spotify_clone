function x(){function r(n){if(n=n.replace(/^#/,""),n.length===3&&(n=n.split("").map(s=>s+s).join("")),n.length!==6)throw new Error("Mã màu HEX không hợp lệ");const i=parseInt(n.substring(0,2),16),o=parseInt(n.substring(2,4),16),a=parseInt(n.substring(4,6),16);return{r:i,g:o,b:a}}function t(n,i,o,a=.7){return{r:Math.round(n*a),g:Math.round(i*a),b:Math.round(o*a)}}function e(n,i=1,o=.5,a=50){const{r:s,g:u,b:v}=r(n),{r:f,g:l,b:h}=t(s,u,v,.8);return`linear-gradient(${a}deg, 
        rgba(${s}, ${u}, ${v}, ${i}), 
        rgba(${f}, ${l}, ${h}, ${o}))`}return{hexToRgb:r,darkenColor:t,generateLinearGradient:e}}/*! Fast Average Color | © 2023 Denis Seleznev | MIT License | https://github.com/fast-average-color/fast-average-color */function y(r){var t=r.toString(16);return t.length===1?"0"+t:t}function C(r){return"#"+r.map(y).join("")}function D(r){var t=(r[0]*299+r[1]*587+r[2]*114)/1e3;return t<128}function S(r){return r?$(r)?r:[r]:[]}function $(r){return Array.isArray(r[0])}function E(r,t,e){for(var n=0;n<e.length;n++)if(F(r,t,e[n]))return!0;return!1}function F(r,t,e){switch(e.length){case 3:if(P(r,t,e))return!0;break;case 4:if(_(r,t,e))return!0;break;case 5:if(q(r,t,e))return!0;break;default:return!1}}function P(r,t,e){return r[t+3]!==255||r[t]===e[0]&&r[t+1]===e[1]&&r[t+2]===e[2]}function _(r,t,e){return r[t+3]&&e[3]?r[t]===e[0]&&r[t+1]===e[1]&&r[t+2]===e[2]&&r[t+3]===e[3]:r[t+3]===e[3]}function p(r,t,e){return r>=t-e&&r<=t+e}function q(r,t,e){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=r[t+3],v=p(u,a,s);return a?!!(!u&&v||p(r[t],n,s)&&p(r[t+1],i,s)&&p(r[t+2],o,s)&&v):v}var B=24;function j(r,t,e){for(var n={},i=e.dominantDivider||B,o=e.ignoredColor,a=e.step,s=[0,0,0,0,0],u=0;u<t;u+=a){var v=r[u],f=r[u+1],l=r[u+2],h=r[u+3];if(!(o&&E(r,u,o))){var c=Math.round(v/i)+","+Math.round(f/i)+","+Math.round(l/i);n[c]?n[c]=[n[c][0]+v*h,n[c][1]+f*h,n[c][2]+l*h,n[c][3]+h,n[c][4]+1]:n[c]=[v*h,f*h,l*h,h,1],s[4]<n[c][4]&&(s=n[c])}}var g=s[0],A=s[1],W=s[2],m=s[3],O=s[4];return m?[Math.round(g/m),Math.round(A/m),Math.round(W/m),Math.round(m/O)]:e.defaultColor}function k(r,t,e){for(var n=0,i=0,o=0,a=0,s=0,u=e.ignoredColor,v=e.step,f=0;f<t;f+=v){var l=r[f+3],h=r[f]*l,c=r[f+1]*l,g=r[f+2]*l;u&&E(r,f,u)||(n+=h,i+=c,o+=g,a+=l,s++)}return a?[Math.round(n/a),Math.round(i/a),Math.round(o/a),Math.round(a/s)]:e.defaultColor}function z(r,t,e){for(var n=0,i=0,o=0,a=0,s=0,u=e.ignoredColor,v=e.step,f=0;f<t;f+=v){var l=r[f],h=r[f+1],c=r[f+2],g=r[f+3];u&&E(r,f,u)||(n+=l*l*g,i+=h*h*g,o+=c*c*g,a+=g,s++)}return a?[Math.round(Math.sqrt(n/a)),Math.round(Math.sqrt(i/a)),Math.round(Math.sqrt(o/a)),Math.round(a/s)]:e.defaultColor}function T(r){return I(r,"defaultColor",[0,0,0,0])}function I(r,t,e){return r[t]===void 0?e:r[t]}var H=10,M=100;function G(r){return r.search(/\.svg(\?|$)/i)!==-1}function N(r){if(L(r)){var t=r.naturalWidth,e=r.naturalHeight;return!r.naturalWidth&&G(r.src)&&(t=e=M),{width:t,height:e}}return X(r)?{width:r.videoWidth,height:r.videoHeight}:{width:r.width,height:r.height}}function w(r){return U(r)?"canvas":V(r)?"offscreencanvas":Z(r)?"imagebitmap":r.src}function L(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement}var R=typeof OffscreenCanvas<"u";function V(r){return R&&r instanceof OffscreenCanvas}function X(r){return typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement}function U(r){return typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement}function Z(r){return typeof ImageBitmap<"u"&&r instanceof ImageBitmap}function J(r,t){var e=I(t,"left",0),n=I(t,"top",0),i=I(t,"width",r.width),o=I(t,"height",r.height),a=i,s=o;if(t.mode==="precision")return{srcLeft:e,srcTop:n,srcWidth:i,srcHeight:o,destWidth:a,destHeight:s};var u;return i>o?(u=i/o,a=M,s=Math.round(a/u)):(u=o/i,s=M,a=Math.round(s/u)),(a>i||s>o||a<H||s<H)&&(a=i,s=o),{srcLeft:e,srcTop:n,srcWidth:i,srcHeight:o,destWidth:a,destHeight:s}}var K=typeof window>"u";function Q(){return K?R?new OffscreenCanvas(1,1):null:document.createElement("canvas")}var Y="FastAverageColor: ";function d(r){return Error(Y+r)}function b(r,t){t||console.error(r)}var rr=function(){function r(){this.canvas=null,this.ctx=null}return r.prototype.getColorAsync=function(t,e){if(!t)return Promise.reject(d("call .getColorAsync() without resource"));if(typeof t=="string"){if(typeof Image>"u")return Promise.reject(d("resource as string is not supported in this environment"));var n=new Image;return n.crossOrigin=e&&e.crossOrigin||"",n.src=t,this.bindImageEvents(n,e)}else{if(L(t)&&!t.complete)return this.bindImageEvents(t,e);var i=this.getColor(t,e);return i.error?Promise.reject(i.error):Promise.resolve(i)}},r.prototype.getColor=function(t,e){e=e||{};var n=T(e);if(!t){var i=d("call .getColor() without resource");return b(i,e.silent),this.prepareResult(n,i)}var o=N(t),a=J(o,e);if(!a.srcWidth||!a.srcHeight||!a.destWidth||!a.destHeight){var i=d('incorrect sizes for resource "'.concat(w(t),'"'));return b(i,e.silent),this.prepareResult(n,i)}if(!this.canvas&&(this.canvas=Q(),!this.canvas)){var i=d("OffscreenCanvas is not supported in this browser");return b(i,e.silent),this.prepareResult(n,i)}if(!this.ctx){if(this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),!this.ctx){var i=d("Canvas Context 2D is not supported in this browser");return b(i,e.silent),this.prepareResult(n)}this.ctx.imageSmoothingEnabled=!1}this.canvas.width=a.destWidth,this.canvas.height=a.destHeight;try{this.ctx.clearRect(0,0,a.destWidth,a.destHeight),this.ctx.drawImage(t,a.srcLeft,a.srcTop,a.srcWidth,a.srcHeight,0,0,a.destWidth,a.destHeight);var s=this.ctx.getImageData(0,0,a.destWidth,a.destHeight).data;return this.prepareResult(this.getColorFromArray4(s,e))}catch(u){var i=d("security error (CORS) for resource ".concat(w(t),`.
Details: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image`));return b(i,e.silent),!e.silent&&console.error(u),this.prepareResult(n,i)}},r.prototype.getColorFromArray4=function(t,e){e=e||{};var n=4,i=t.length,o=T(e);if(i<n)return o;var a=i-i%n,s=(e.step||1)*n,u;switch(e.algorithm||"sqrt"){case"simple":u=k;break;case"sqrt":u=z;break;case"dominant":u=j;break;default:throw d("".concat(e.algorithm," is unknown algorithm"))}return u(t,a,{defaultColor:o,ignoredColor:S(e.ignoredColor),step:s,dominantDivider:e.dominantDivider})},r.prototype.prepareResult=function(t,e){var n=t.slice(0,3),i=[t[0],t[1],t[2],t[3]/255],o=D(t);return{value:[t[0],t[1],t[2],t[3]],rgb:"rgb("+n.join(",")+")",rgba:"rgba("+i.join(",")+")",hex:C(n),hexa:C(t),isDark:o,isLight:!o,error:e}},r.prototype.destroy=function(){this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.ctx=null},r.prototype.bindImageEvents=function(t,e){var n=this;return new Promise(function(i,o){var a=function(){v();var f=n.getColor(t,e);f.error?o(f.error):i(f)},s=function(){v(),o(d('Error loading image "'.concat(t.src,'"')))},u=function(){v(),o(d('Image "'.concat(t.src,'" loading aborted')))},v=function(){t.removeEventListener("load",a),t.removeEventListener("error",s),t.removeEventListener("abort",u)};t.addEventListener("load",a),t.addEventListener("error",s),t.addEventListener("abort",u)})},r}();export{rr as F,x as u};
