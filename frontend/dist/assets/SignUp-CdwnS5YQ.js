import{r as n,b as N,j as e,af as k,ak as F,ag as S,ah as I,ai as v,l as o,al as C,t as D}from"./index-CkHhWBjh.js";import{F as c,U}from"./UploadImage-BE5pLoZO.js";import{a as E}from"./authService-DgPyniWJ.js";import"./row-BFFtkFRa.js";import"./addEventListener-1zo4ObUy.js";const R=()=>{const[d,j]=n.useState({name:"",email:"",password:"",confirmPassword:""}),[t,m]=n.useState(!1),x=N(),[b,h]=n.useState(!0),w=()=>{const[s,i]=n.useState(d),[r,l]=n.useState(!1),u=a=>{if(a.preventDefault(),s.password!==s.confirmPassword){o.error("Mật khẩu nhập lại không khớp!");return}j(s),h(!1)};return e.jsxs("form",{onSubmit:u,className:" w-full  flex flex-col justify-center gap-10  !text-[var(--light-gray3)]",children:[e.jsx("div",{className:"",children:e.jsxs("div",{className:"input-animation ",children:[e.jsx("input",{name:"email",placeholder:" ",type:"email",className:"border-1 !border-[var(--light-gray2)] ",value:s.email,onChange:a=>i({...s,email:a.target.value}),required:!0,disabled:t}),e.jsx("label",{for:"email",children:"Email"})]})}),e.jsxs("div",{className:"flex gap-2 ",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"input-animation",children:[e.jsx("input",{name:"password",placeholder:" ",type:r?"text":"password",className:"w-full border-1 !border-[var(--light-gray2)]",value:s.password,onChange:a=>i({...s,password:a.target.value}),required:!0,minLength:6,disabled:t}),e.jsx("label",{htmlFor:"password",children:"Mật khẩu"})]})}),e.jsx("div",{className:"text-[var(--light-gray3)] text-2xl flex items-center cursor-pointer",onClick:()=>l(!r),children:r?e.jsx(S,{}):e.jsx(I,{})})]}),e.jsx("div",{className:"",children:e.jsxs("div",{className:"input-animation",children:[e.jsx("input",{type:"password",name:"confirmPassword",value:s.confirmPassword,placeholder:" ",className:"w-full border-1 !border-[var(--light-gray2)]",onChange:a=>i({...s,confirmPassword:a.target.value}),required:!0,minLength:6,disabled:t}),e.jsx("label",{htmlFor:"password",children:"Nhập lại mật khẩu"})]})}),e.jsx("button",{type:"submit",disabled:t,className:` w-fit   !mt-10 !mb-5 px-10   rounded-full font-medium text-white self-center
                            ${t?"bg-gray-600 cursor-not-allowed":"border-[var(--light-gray2)] border-1 hover:bg-[#1ed760]  transform hover:scale-105 transition-all  cursor-pointer"}`,children:e.jsx(v,{size:40,className:"text-[var(--light-gray2)] "})})]})},y=()=>{const[s]=c.useForm(),i=async r=>{try{m(!0);const l={name:r.name,email:d.email,password:d.password},a=(await E(l)).data;if(a.success){let g="";if(r.image){const p=new FormData;p.append("file",r.image);const f=await C(p);if(f.status===200)g=encodeURI(f.data.message);else throw new Error("Image upload failed")}(await D(a.data.id,{avatar:g})).data.status?(o.success({content:"Đăng ký thành công!",duration:2}),setTimeout(()=>{x("/sign-in")},1e3)):o.error({content:a.message,duration:3})}else o.error({content:a.message||"Đăng ký thất bại",duration:3})}catch(l){console.error("Error adding acc:",l),o.error({content:l.message||"Đăng ký thất bại",duration:3})}finally{m(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm underline cursor-pointer text-white mb-8",onClick:()=>h(!0),children:"< Quay lại"}),e.jsxs(c,{form:s,onFinish:i,className:"w-full ",children:[e.jsxs("div",{className:"flex flex-col  gap-4  h-[40vh] !text-[var(--light-gray3)] overflow-y-auto custom-scroll",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{children:"Chọn ảnh đại diện"}),e.jsx(c.Item,{name:"image",rules:[{required:!0,message:"Vui lòng chọn ảnh đại diện!"}],children:e.jsx(U,{form:s})})]}),e.jsx("div",{className:"flex-1 ",children:e.jsx(c.Item,{name:"name",rules:[{required:!0,message:"Nhập tên của bạn!"}],children:e.jsxs("div",{className:"input-animation",children:[e.jsx("input",{placeholder:" ",type:"text",className:"!text-base border-1 !border-[var(--light-gray2)] !text-[var(--light-gray3)]",disabled:t}),e.jsx("label",{htmlFor:"name",children:"Họ và tên"})]})})})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("button",{type:"submit",disabled:t,className:` w-fit   !mb-5 px-10   rounded-full font-medium text-white self-center
                            ${t?"bg-gray-600 cursor-not-allowed":"border-[var(--light-gray2)] border-1 hover:bg-[#1ed760]  transform hover:scale-105 transition-all  cursor-pointer"}`,children:t?e.jsx("div",{className:"flex items-center justify-center my-3",children:e.jsxs("svg",{className:"animate-spin h-5 w-5 ",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):e.jsx(v,{size:40,className:"text-[var(--light-gray2)] "})})})]})]})};return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-black ",children:[e.jsxs("div",{className:"absolute flex gap-2 top-[3vw] left-[3vw]  items-center cursor-pointer",onClick:()=>x("/"),children:[e.jsx(k,{className:"text-[var(--main-green)] text-4xl "}),e.jsx("div",{className:"text-3xl font-bold text-[var(--light-gray3)]",children:"Spotify"})]}),e.jsxs("div",{className:"w-full max-w-[30vw] bg-[var(--dark-gray)] rounded-lg shadow-lg pt-20 px-10 pb-2",style:{"box-shadow":"rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px"},children:[e.jsx("div",{className:"flex flex-col items-center mb-10",children:e.jsx("div",{className:"text-[var(--light-gray3)] text-xl font-bold",children:"Đăng ký"})}),b?e.jsx(w,{}):e.jsx(y,{}),e.jsx("div",{className:"text-center text-sm",children:e.jsxs("p",{className:"text-gray-400",children:["Đã có tài khoản?"," ",e.jsx(F,{to:"/sign-in",className:"text-[#1DB954] hover:text-[#1ed760] font-medium",children:"Đăng nhập"})]})})]})]})};export{R as default};
