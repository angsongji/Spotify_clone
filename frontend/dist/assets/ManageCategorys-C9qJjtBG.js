import{r as s,j as e,am as w,ao as C,n as N,aq as b,l as i,aw as S}from"./index-CkHhWBjh.js";import{F}from"./Table-CC8VGPP0.js";import"./addEventListener-1zo4ObUy.js";import"./index-DGSbmTyq.js";import"./Input-BpZDHFDz.js";import"./FileOutlined-CCgYKKmr.js";const I=()=>{const[l,u]=s.useState(""),[d,m]=s.useState([]),[x,h]=s.useState([]),[g,o]=s.useState(!1),[f,y]=s.useState(!0);s.useEffect(()=>{(async()=>{try{const a=await N();m(a.data.message),h(a.data.message)}catch(a){console.log("Lỗi lấy thể loại ",a.message)}finally{y(!1)}})()},[]),s.useEffect(()=>{let t=[...d];l&&(t=t.filter(a=>a.name.toLowerCase().includes(l.toLowerCase()))),h(t)},[l,d]);const p=[{title:"STT",dataIndex:"stt",key:"stt",render:(t,a,n)=>n+1},{title:"Tên thể loại",dataIndex:"name",key:"name"}],v=()=>{const[t,a]=s.useState(""),n=async c=>{c.preventDefault();try{i.loading({content:"Đang lưu...",key:"save"});const r=await S({name:t});(r==null?void 0:r.data.status)===201&&(m(j=>[...j,r.data.message]),o(!1),a(""),i.success({content:"Thêm thể loại thành công!",key:"save",duration:2}))}catch(r){console.error("API Error",r),i.error({content:"Lỗi mạng hoặc máy chủ!",key:"save",duration:2})}};return e.jsx("div",{className:"z-10 absolute top-0 left-0 w-full h-full bg-black/80 flex flex-col items-center justify-center gap-2",children:e.jsxs("div",{className:"flex flex-col gap-2 w-1/4",children:[e.jsx(b,{className:"text-white text-3xl cursor-pointer self-end translate-x-[100%]",onClick:()=>o(!1)}),e.jsx("form",{onSubmit:n,className:"p-2 bg-[var(--dark-gray)] rounded-md shadow-md w-full h-fit flex flex-col gap-2",children:e.jsxs("div",{className:"flex flex-col gap-5  p-2",children:[e.jsx("label",{htmlFor:"name",children:"Tên thể loại"}),e.jsx("input",{required:!0,className:"outline-none border-1 border-[var(--light-gray2)] rounded-sm p-1",name:"name",type:"text",value:t,onChange:c=>a(c.target.value)}),e.jsx("button",{className:"cursor-pointer self-center bg-[var(--light-gray2)] w-fit text-white p-2 rounded-sm",type:"submit",children:"Thêm thể loại"})]})})]})})};return e.jsx("div",{children:f?e.jsx("div",{className:"loader-container min-h-[50vh] flex justify-center items-center",children:e.jsx("span",{className:"loader",children:" "})}):e.jsxs("div",{className:"flex flex-col gap-7",children:[g&&e.jsx(v,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Tên thể loại",className:"bg-[var(--light-gray2)] text-white p-2 rounded-full w-full focus:outline-none placeholder-[var(--light-gray3)] text-sm pl-10",value:l,onChange:t=>u(t.target.value)}),e.jsx(w,{className:"absolute left-2 top-0 translate-x-[50%] translate-y-[50%] text-[var(--light-gray3)]"})]})}),e.jsx(C,{onClick:()=>o(!0),className:"cursor-pointer hover:text-white text-[var(--main-green)] text-2xl"})]}),e.jsx(F,{columns:p,dataSource:x,pagination:{pageSize:9},scrollToFirstRowOnChange:!0,rowKey:"email"})]})})};export{I as default};
