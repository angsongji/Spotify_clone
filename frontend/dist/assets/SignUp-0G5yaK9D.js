import{r as i,b as y,j as e,af as N,ak as F,ag as k,ah as S,ai as v,l as h,al as I}from"./index-COxCwWZM.js";import{F as c,U as C}from"./UploadImage-aFuG0uTa.js";import{a as D}from"./authService-Bun0fk3r.js";import"./row-BZ7R_aan.js";import"./addEventListener-C0BB_NjA.js";const z=()=>{const[d,g]=i.useState({name:"",email:"",password:"",confirmPassword:""}),[n,L]=i.useState(!1),u=y(),[j,p]=i.useState(!0),b=()=>{const[a,r]=i.useState(d),[t,m]=i.useState(!1),l=s=>{if(s.preventDefault(),a.password!==a.confirmPassword){h.error("Mật khẩu nhập lại không khớp!");return}g(a),p(!1)};return e.jsxs("form",{onSubmit:l,className:" w-full  flex flex-col justify-center gap-10  !text-[var(--light-gray3)]",children:[e.jsx("div",{className:"",children:e.jsxs("div",{className:"input-animation ",children:[e.jsx("input",{name:"email",placeholder:" ",type:"email",className:"border-1 !border-[var(--light-gray2)] ",value:a.email,onChange:s=>r({...a,email:s.target.value}),required:!0,disabled:n}),e.jsx("label",{for:"email",children:"Email"})]})}),e.jsxs("div",{className:"flex gap-2 ",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"input-animation",children:[e.jsx("input",{name:"password",placeholder:" ",type:t?"text":"password",className:"w-full border-1 !border-[var(--light-gray2)]",value:a.password,onChange:s=>r({...a,password:s.target.value}),required:!0,minLength:6,disabled:n}),e.jsx("label",{htmlFor:"password",children:"Mật khẩu"})]})}),e.jsx("div",{className:"text-[var(--light-gray3)] text-2xl flex items-center cursor-pointer",onClick:()=>m(!t),children:t?e.jsx(k,{}):e.jsx(S,{})})]}),e.jsx("div",{className:"",children:e.jsxs("div",{className:"input-animation",children:[e.jsx("input",{type:"password",name:"confirmPassword",value:a.confirmPassword,placeholder:" ",className:"w-full border-1 !border-[var(--light-gray2)]",onChange:s=>r({...a,confirmPassword:s.target.value}),required:!0,minLength:6,disabled:n}),e.jsx("label",{htmlFor:"password",children:"Nhập lại mật khẩu"})]})}),e.jsx("button",{type:"submit",disabled:n,className:` w-fit   !mt-10 !mb-5 px-10   rounded-full font-medium text-white self-center
                            ${n?"bg-gray-600 cursor-not-allowed":"border-[var(--light-gray2)] border-1 hover:bg-[#1ed760]  transform hover:scale-105 transition-all  cursor-pointer"}`,children:e.jsx(v,{size:40,className:"text-[var(--light-gray2)] "})})]})},w=()=>{const[a]=c.useForm(),[r,t]=i.useState(!1),m=async l=>{console.log("Form Values: ",l);try{t(!0);let s="";if(l.image){const o=new FormData;o.append("file",l.image);const f=await I(o);if(f.status===200)s=encodeURI(f.data.message);else throw new Error("Image upload failed")}console.log("image ",s),g(o=>({...o,name:l.name,image:encodeURI(s)})),console.log("image ",s),console.log("noi dung form ",d);const x=(await D(d)).data;console.log("Response:",x),x.success?(h.success({content:"Đăng ký thành công!",duration:2}),setTimeout(()=>{u("/sign-in")},1e3)):h.error({content:x.message||"Đăng ký thất bại",duration:3})}catch(s){console.error("Error adding song:",s)}finally{t(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm underline cursor-pointer text-white mb-8",onClick:()=>p(!0),children:"< Quay lại"}),e.jsxs(c,{form:a,onFinish:m,className:"w-full ",children:[e.jsxs("div",{className:"flex flex-col  gap-4  h-[40vh] !text-[var(--light-gray3)] overflow-y-auto custom-scroll",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{children:"Chọn ảnh đại diện"}),e.jsx(c.Item,{name:"image",rules:[{required:!0,message:"Vui lòng chọn ảnh đại diện!"}],children:e.jsx(C,{form:a})})]}),e.jsx("div",{className:"flex-1 ",children:e.jsx(c.Item,{name:"name",rules:[{required:!0,message:"Nhập tên của bạn!"}],children:e.jsxs("div",{className:"input-animation",children:[e.jsx("input",{placeholder:" ",type:"text",className:"!text-base border-1 !border-[var(--light-gray2)] !text-[var(--light-gray3)]",disabled:r}),e.jsx("label",{htmlFor:"name",children:"Họ và tên"})]})})})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("button",{type:"submit",disabled:r,className:` w-fit   !mb-5 px-10   rounded-full font-medium text-white self-center
                            ${r?"bg-gray-600 cursor-not-allowed":"border-[var(--light-gray2)] border-1 hover:bg-[#1ed760]  transform hover:scale-105 transition-all  cursor-pointer"}`,children:r?e.jsx("div",{className:"flex items-center justify-center my-3",children:e.jsxs("svg",{className:"animate-spin h-5 w-5 ",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):e.jsx(v,{size:40,className:"text-[var(--light-gray2)] "})})})]})]})};return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-black ",children:[e.jsxs("div",{className:"absolute flex gap-2 top-[3vw] left-[3vw]  items-center cursor-pointer",onClick:()=>u("/"),children:[e.jsx(N,{className:"text-[var(--main-green)] text-4xl "}),e.jsx("div",{className:"text-3xl font-bold text-[var(--light-gray3)]",children:"Spotify"})]}),e.jsxs("div",{className:"w-full max-w-[30vw] bg-[var(--dark-gray)] rounded-lg shadow-lg pt-20 px-10 pb-2",style:{"box-shadow":"rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px"},children:[e.jsx("div",{className:"flex flex-col items-center mb-10",children:e.jsx("div",{className:"text-[var(--light-gray3)] text-xl font-bold",children:"Đăng ký"})}),j?e.jsx(b,{}):e.jsx(w,{}),e.jsx("div",{className:"text-center text-sm",children:e.jsxs("p",{className:"text-gray-400",children:["Đã có tài khoản?"," ",e.jsx(F,{to:"/sign-in",className:"text-[#1DB954] hover:text-[#1ed760] font-medium",children:"Đăng nhập"})]})})]})]})};export{z as default};
